{% extends "base.html" %}

{% block content %}
  <div class="container mt-5">

    <div class="jumbotron text-center bg-primary text-white">
      <h1 class="display-4">Welcome to Restaurant Manager!</h1>
      <p class="lead">Manage your kitchen with ease.</p>
      <a href="{% url 'kitchen:dish-list' %}" class="btn btn-light btn-lg mt-3">View Dishes</a>
    </div>

    <div class="row text-center">
      <div class="col-md-4 mb-4">
        <div class="card bg-success text-white shadow-sm">
          <div class="card-body">
            <i class="fas fa-user fa-3x mb-3"></i>
            <h3 class="card-title">Cooks</h3>
            <h2 class="display-4 counter" data-count="{{ num_cooks }}">0</h2>
          </div>
        </div>
      </div>

      <div class="col-md-4 mb-4">
        <div class="card bg-info text-white shadow-sm">
          <div class="card-body">
            <i class="fas fa-utensils fa-3x mb-3"></i>
            <h3 class="card-title">Dishes</h3>
            <h2 class="display-4 counter" data-count="{{ num_dishes }}">0</h2>
          </div>
        </div>
      </div>

      <div class="col-md-4 mb-4">
        <div class="card bg-warning text-white shadow-sm">
          <div class="card-body">
            <i class="fas fa-eye fa-3x mb-3"></i>
            <h3 class="card-title">Visits</h3>
            <h2 class="display-4 counter" data-count="{{ num_visits }}">0</h2>
          </div>
        </div>
      </div>
    </div>

    <div class="text-center mt-5">
      {% if user.is_authenticated %}
        <a href="{{ user.get_absolute_url }}" class="btn btn-primary btn-lg">
          <i class="fas fa-user"></i> Go to Profile
        </a>
      {% else %}
        <a href="{% url 'login' %}?next={{ request.path }}" class="btn btn-primary btn-lg">
          <i class="fas fa-sign-in-alt"></i> Login
        </a>
      {% endif %}
    </div>

  </div>

  <script>
      document.addEventListener('DOMContentLoaded', function () {
          const counters = document.querySelectorAll('.counter');
          counters.forEach(counter => {
              const animateCount = () => {
                  const target = +counter.getAttribute('data-count');
                  const count = +counter.innerText;
                  const speed = 2000;

                  const increment = target / speed;

                  if (count < target) {
                      counter.innerText = Math.ceil(count + increment);
                      setTimeout(animateCount, 100);
                  } else {
                      counter.innerText = target;
                  }
              };
              animateCount();
          });
      });
  </script>
{% endblock %}